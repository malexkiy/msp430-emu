# msp430-emu
# Теоретические сведения

Эмулятор - комплекс программных, аппаратных средств или их сочетание, который позволяет одной вычислительной системе иммитировать поведение другой вычислительной системы. Целью эмуляции является максимально точное воспроизведение поведения эмулируемой системы.

В качестве эмулируемой системы выбран микроконтроллер MSP430G2553 семейства MSP430.
MSP430 имеет фоннеймановскую архитектуру, с единым адресным пространством для команд и данных. Память может адресоваться как побайтово, так и пословно. Порядок хранения 16-разрядных слов - little-endian (от младшего к старшему).

Процессор содержит 16 16-разрядных ортогональных регистров.
Регистр R0 используется как программный счетчик (Program Counter - PC). PC указывает на следующую инструкцию, которая будет выполнена. Каждая инструкция использует чётное число байт (2, 4 или 6), соответсвенно инкрементируется и значение регистра PC. Доступ к инструкциям в 64-КБ адресном пространстве выполняется пословно, и значение PC выровнено по чётным адресам.

Регистр R1 используется как указатель стека (Stack Pointer - SP).
Указатель стека (SR/R1) используется процессором для хранения адресов возврата при вызове подпрограмм и обработке прерываний.
Он использует схему предекремента и постинкремента. Кроме того, SP может быть использован программой со всеми инструкциями и режимами адресации. SP инициализируется пользователем в ОЗУ и выровнен по чётным адресам.

Регистр R2 используется как регистр статуса (Status Register — SR).
Регистр статуса (SR/R2) используется в качестве регистра источника или назначения, а также может быть использован в качетве регистра общего назначения, но только с инструкциями, адресуемыми пословно. Остальные комбинации режимов адресации используются для генератора констант.

Регистр R3 используется как специальный регистр, именуемый генератором констант (Constant Generator - CG). R2 также может использоваться в качестве генератора констант. Генератор констант используется для сокращения общей длины команды вследствие неявного представления константы в коде операции. Шесть общеиспользуемых констант генерируются с помощью регистров генератора констант R2 и R3 без требования дополнительного 16-битного слова программного кода. Выбор констант производится через адресный режим регистра-источника.

Регистры с R4 по R15 используются как регистры общего назначения.
Все эти регистры могут быть использованы для хранения данных, указателей или значений индексов. Доступ к ним может быть осуществлён как к байту, так и как к слову.

Набор инструкций очень простой и представлен 27 инструкциями, 24 эмулированными инструкциями. Инструкции имеют как 8-битную (байт), так и 16-битную (слово) форму обработки операндов. Бит B/W управляет этим признаком.

# Входные данные
На вход программы поступает бинарный файл (образ прошивки для микроконтроллера MSP430G2553).
Прошивка, написанная на языке программирования C компилируется в IDE IAR MSP430 с последующим преобразованием в формат RAW Binary.
Формат файла RAW Binary представляет из себя образ прошивки, в том виде, как она располагается в адресном пространстве микроконтроллера (секции кода, констант, данных).
# Выходные данные
Результат вычислений будет записываться в регистр общего назначения R15.
После завершения работы эмулируемой программы значение этого регистра будет записано в файл в бинарном виде.

# План решения задания:
- изучение набора инструкций MSP430
- написание функций, эмулирующих инструкции
- написание функций, эмулирующих работу процессора
- написание тестовых программ для MSP430
